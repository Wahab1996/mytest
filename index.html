<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¬Ø±Ø¹ØªÙŠ â€“ Ø­Ø§Ø³Ø¨Ø© Ø¬Ø±Ø¹Ø§Øª Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</title>
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      background: #f0f4f8;
      color: #333;
      padding: 20px;
      margin: 0;
    }
    h1, h2 {
      color: #007bff;
      text-align: center;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    button {
      margin-top: 20px;
      background-color: #007bff;
      color: white;
      padding: 12px;
      width: 48%;
      border: none;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    button.copy-btn {
      background-color: #28a745;
      margin-left: 4%;
    }
    .result {
      margin-top: 20px;
      padding: 15px;
      background-color: #e7f3ff;
      border: 1px solid #b3daff;
      border-radius: 8px;
      font-weight: bold;
      min-height: 60px;
      word-break: break-word;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
      direction: rtl;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: right;
    }
    th {
      background-color: #007bff;
      color: white;
    }
    tr:nth-child(even) {
      background-color: #f1f1f1;
    }
    footer {
      margin-top: 40px;
      text-align: center;
      font-size: 14px;
      color: #666;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ”¬ ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø±Ø¹ØªÙŠ</h1>
    <p style="text-align:center;">Ø­Ø§Ø³Ø¨Ø© Ø¬Ø±Ø¹Ø§Øª Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ²Ù† ÙˆØ§Ù„Ø¹Ù…Ø±</p>

    <h2>ğŸ§® Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¬Ø±Ø¹Ø©</h2>
    <label for="weight">ÙˆØ²Ù† Ø§Ù„Ø·ÙÙ„ (ÙƒØ¬Ù…):</label>
    <input type="number" id="weight" placeholder="Ù…Ø«Ø§Ù„: 12" min="0" step="0.1" />

    <label for="drug">Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ§Ø¡:</label>
    <select id="drug">
      <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ§Ø¡ --</option>
    </select>

    <div style="display:flex; justify-content: space-between;">
      <button onclick="calculateDose()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø©</button>
      <button class="copy-btn" onclick="copyDose()">Ù†Ø³Ø® Ø§Ù„Ø¬Ø±Ø¹Ø©</button>
    </div>

    <button style="margin-top: 10px; width: 100%;" onclick="sendWhatsapp()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ø±Ø¹Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„Ø£Ù‡Ù„</button>

    <div id="result" class="result" style="display:none;"></div>

    <h2>ğŸ’Š Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h2>
    <table>
      <thead>
        <tr>
          <th>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¹Ù„Ù…ÙŠ</th>
          <th>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ØªØ¬Ø§Ø±ÙŠ</th>
          <th>Ø§Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„Ù…Ø¹ØªØ§Ø¯Ø© (Ù„ÙƒÙ„ ÙƒØ¬Ù…)</th>
          <th>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
        </tr>
      </thead>
      <tbody id="drugs-table-body">
        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¦ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
      </tbody>
    </table>

    <footer>
      <p>ØªÙ… Ø¨ÙˆØ§Ø³Ø·Ø©: <strong>Ø¯. Ø¹Ø¨Ø¯Ø§Ù„ÙˆÙ‡Ø§Ø¨ Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ù†Ø§Ù† Ø§Ù„Ø´ÙŠØ®</strong> â€“ Ø·Ø¨ÙŠØ¨ Ø·ÙˆØ§Ø±Ø¦ Ø£Ø·ÙØ§Ù„ØŒ Ø·Ù…ÙˆØ­ Ø·Ø¨ÙŠØ¨ Ø£Ø³Ø±Ø©</p>
      <p>Ù…Ø·ÙˆØ± ØªØ·Ø¨ÙŠÙ‚ <strong>Ø¬Ø±Ø¹ØªÙŠ</strong></p>
      <p>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¹Ù„Ù…ÙŠØ©: UpToDate, BMJ, AMBOSS, Saudi Guidelines, Medscape</p>
    </footer>
  </div>

  <script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙÙŠ JSON Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯
    const drugs = [
      { id:"paracetamol", scientific:"Paracetamol", trade:"Ø³ÙŠØªØ§Ù„ØŒ ÙÙŠÙØ§Ø¯ÙˆÙ„ØŒ Ø£Ø¯ÙˆÙ„", dose:"10-15", unit:"Ù…Ø¬Ù…", concentration:"120/5", note:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ø§Ù„ÙŠÙˆÙ…ÙŠ: 60 Ù…Ø¬Ù…/ÙƒØ¬Ù…" },
      { id:"ibuprofen", scientific:"Ibuprofen", trade:"Ø¨Ø±ÙˆÙÙŠÙ†ØŒ Ù†ÙŠÙˆØ±ÙˆÙÙŠÙ†", dose:"5-10", unit:"Ù…Ø¬Ù…", concentration:"100/5", note:"Ù„Ø§ ÙŠØ³ØªØ®Ø¯Ù… ØªØ­Øª Ø¹Ù…Ø± 6 Ø´Ù‡ÙˆØ±" },
      { id:"azithromycin", scientific:"Azithromycin", trade:"Ø²ÙŠØ«Ø±ÙˆÙ…Ø§ÙƒØ³ØŒ Ø£Ø²ÙŠØ«Ø±ÙˆØ¯Ø§Ø±", dose:"10", unit:"Ù…Ø¬Ù…", concentration:"250/5", note:"Ù„Ù…Ø¯Ø© 3 Ø£ÙŠØ§Ù… ÙÙ‚Ø·" },
      { id:"ceftriaxone", scientific:"Ceftriaxone", trade:"Ø±ÙˆØ³Ø¨ÙŠÙ†ØŒ Ø³ÙŠÙØªØ±ÙŠØ§ÙƒØ³", dose:"50-100", unit:"Ù…Ø¬Ù…", concentration:"", note:"Ù„Ø§ ÙŠÙØ®Ù„Ø· Ù…Ø¹ Ø§Ù„ÙƒØ§Ù„Ø³ÙŠÙˆÙ…" },
      { id:"ondansetron", scientific:"Ondansetron", trade:"Ø²ÙˆÙØ±Ø§Ù†", dose:"0.15", unit:"Ù…Ø¬Ù…", concentration:"", note:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 8 Ù…Ø¬Ù…" },
      // Ø£Ø¶Ù Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ù‡Ù†Ø§ (Ø­ØªÙ‰ ØªØµÙ„ Ù„Ù€50 Ø¯ÙˆØ§Ø¡ ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª)
      { id:"hydrocortisone", scientific:"Hydrocortisone", trade:"ÙƒÙˆØ±ØªÙŠØ²ÙˆÙ†", dose:"1-2", unit:"Ù…Ø¬Ù…", concentration:"", note:"ÙÙŠ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø±Ø¨Ùˆ Ø£Ùˆ Ø§Ù„ØªØ­Ø³Ø³" },
      // Ù…Ø«Ø§Ù„ Ø£Ø¯ÙˆÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ© (ØªÙ‚Ø¯Ø± ØªÙƒÙ…Ù„ Ø¨Ù†ÙØ³ Ø§Ù„Ù†Ù…Ø·)
      { id:"amoxicillin", scientific:"Amoxicillin", trade:"Ø£Ù…ÙˆÙƒØ³ÙŠÙ„ØŒ Ø£Ù…ÙˆÙƒØ³", dose:"20-40", unit:"Ù…Ø¬Ù…", concentration:"125/5", note:"Ù…Ø±ØªÙŠÙ† Ø£Ùˆ Ø«Ù„Ø§Ø« Ù…Ø±Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹" },
      { id:"salbutamol", scientific:"Salbutamol", trade:"ÙÙŠÙ†ØªÙˆÙ„ÙŠÙ†", dose:"0.15-0.3", unit:"Ù…Ø¬Ù…", concentration:"", note:"ÙÙŠ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø±Ø¨Ùˆ" }
      // ... Ø£ÙƒÙ…Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¹Ù„Ù…ÙŠØ© Ø§Ù„ØªÙŠ ØªÙØ¶Ù„Ù‡Ø§
    ];

    // Ù…Ù„Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙˆØ§Ø¡ Ù…Ù† JSON
    function populateDrugsSelect() {
      const select = document.getElementById('drug');
      drugs.forEach(drug => {
        const option = document.createElement('option');
        option.value = drug.id;
        option.textContent = `${drug.scientific} â€“ ${drug.trade}`;
        select.appendChild(option);
      });
    }

    // Ù…Ù„Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø¯ÙˆÙŠØ©
    function populateDrugsTable() {
      const tbody = document.getElementById('drugs-table-body');
      tbody.innerHTML = "";
      drugs.forEach(drug => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${drug.scientific}</td>
          <td>${drug.trade}</td>
          <td>${drug.dose} ${drug.unit}</td>
          <td>${drug.note || '-'}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø© ÙˆØ¹Ø±Ø¶Ù‡Ø§
    function calculateDose() {
      const weight = parseFloat(document.getElementById("weight").value);
      const drugId = document.getElementById("drug").value;
      const resultDiv = document.getElementById("result");

      if (!weight || weight <= 0 || !drugId) {
        resultDiv.style.display = "block";
        resultDiv.innerHTML = "âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØ²Ù† ØµØ­ÙŠØ­ ÙˆØ§Ø®ØªÙŠØ§Ø± Ø¯ÙˆØ§Ø¡.";
        return;
      }

      const drug = drugs.find(d => d.id === drugId);
      if (!drug) {
        resultDiv.style.display = "block";
        resultDiv.innerHTML = "âŒ Ø§Ù„Ø¯ÙˆØ§Ø¡ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.";
        return;
      }

      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø© (Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¬Ø±Ø¹Ø§Øª)
      const doseRange = drug.dose.split('-').map(Number);
      let doseText = "";

      if (doseRange.length === 2) {
        const minDose = (weight * doseRange[0]).toFixed(1);
        const maxDose = (weight * doseRange[1]).toFixed(1);
        doseText = `${minDose} Ø¥Ù„Ù‰ ${maxDose} ${drug.unit}`;
      } else {
        const dose = (weight * doseRange[0]).toFixed(1);
        doseText = `${dose} ${drug.unit}`;
      }

      // Ø­Ø³Ø§Ø¨ Ù…Ù„Ù„ÙŠÙ„ØªØ± Ø¥Ø°Ø§ ØªØ±ÙƒÙŠØ² Ù…ØªÙˆÙØ±
      if (drug.concentration) {
        const [mg, ml] = drug.concentration.split('/').map(Number);
        if (mg && ml) {
          const minMl = ((weight * doseRange[0]) * ml / mg).toFixed(2);
          const maxMl = doseRange.length === 2 ? ((weight * doseRange[1]) * ml / mg).toFixed(2) : minMl;
          doseText += ` (Ø£ÙŠ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ ${minMl} Ø¥Ù„Ù‰ ${maxMl} Ù…Ù„)`;
        }
      }

      resultDiv.style.display = "block";
      resultDiv.innerHTML = `âœ… Ø§Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„Ù…Ø­Ø³ÙˆØ¨Ø©: <br><strong>${doseText}</strong><br>Ù…Ù„Ø§Ø­Ø¸Ø©: ${drug.note || '-'}`;

      // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¬Ø±Ø¹Ø© Ù„Ù„Ù†Ø³Ø® ÙˆØ§Ù„Ø¥Ø±Ø³Ø§Ù„
      lastDoseText = `Ø¬Ø±Ø¹Ø© ${drug.scientific} (${drug.trade}) Ù„Ù„Ø·ÙÙ„ ÙˆØ²Ù† ${weight} ÙƒØ¬Ù…:\n${doseText}\nÙ…Ù„Ø§Ø­Ø¸Ø©: ${drug.note || '-'}`;
    }

    // Ù†Ø³Ø®Ø© Ø§Ù„Ù†Øµ Ù„Ù„Ù†Ø³Ø®
    let lastDoseText = "";

    function copyDose() {
      if (!lastDoseText) {
        alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø±Ø¹Ø© Ù„Ù„Ø­ÙØ¸ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø© Ø£ÙˆÙ„Ø§Ù‹.");
        return;
      }
      navigator.clipboard.writeText(lastDoseText).then(() => {
        alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¬Ø±Ø¹Ø© Ø¨Ù†Ø¬Ø§Ø­!");
      }).catch(() => {
        alert("ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
      });
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
    function sendWhatsapp() {
      if (!lastDoseText) {
        alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø±Ø¹Ø© Ù„Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø© Ø£ÙˆÙ„Ø§Ù‹.");
        return;
      }
      const encoded = encodeURIComponent(lastDoseText);
      const url = `https://wa.me/?text=${encoded}`;
      window.open(url, '_blank');
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
    window.onload = () => {
      populateDrugsSelect();
      populateDrugsTable();
    };
  </script>
</body>
</html>
<footer style="margin-top: 40px; text-align: center; font-size: 14px; color: #666;">
  <p>ØªÙ… Ø¨ÙˆØ§Ø³Ø·Ø©: <strong>Ø¯. Ø¹Ø¨Ø¯Ø§Ù„ÙˆÙ‡Ø§Ø¨ Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ù†Ø§Ù† Ø§Ù„Ø´ÙŠØ®</strong> â€“ Ø·Ø¨ÙŠØ¨ Ø·ÙˆØ§Ø±Ø¦ Ø£Ø·ÙØ§Ù„ØŒ Ø·Ù…ÙˆØ­ Ø·Ø¨ÙŠØ¨ Ø£Ø³Ø±Ø©</p>
  <p>Ù…Ø·ÙˆØ± ØªØ·Ø¨ÙŠÙ‚ <strong>Ø¬Ø±Ø¹ØªÙŠ</strong></p>
  <p>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¹Ù„Ù…ÙŠØ©: UpToDate , BMJ , AMBOSS , SAUDI GUIDELINES , MEDSCAPE</p>
</footer>